{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport styles from \"./styles\";\nimport StyleButton from \"../StyleButton\";\nimport MicroButton from \"../MicroButton\";\nimport * as Permissions from 'expo-permissions';\nimport { Audio } from 'expo-av';\nimport { Camera } from 'expo-camera';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar RECORDING_OPTIONS_PRESET_HIGH_QUALITY = {\n  isMeteringEnabled: true,\n  android: {\n    extension: '.m4a',\n    sampleRate: 44100,\n    numberOfChannels: 2,\n    bitRate: 128000\n  },\n  ios: {\n    extension: '.caf',\n    sampleRate: 44100,\n    numberOfChannels: 2,\n    bitRate: 128000,\n    linearPCMBitDepth: 16,\n    linearPCMIsBigEndian: false,\n    linearPCMIsFloat: false\n  }\n};\nvar EyeItem = function EyeItem() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    recording = _useState2[0],\n    setRecording = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isRecording = _useState4[0],\n    setIsRecording = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    transcript = _useState6[0],\n    setTranscript = _useState6[1];\n  var startRecording = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        console.log('Requesting permissions..');\n        var _yield$Permissions$as = yield Permissions.askAsync(Permissions.AUDIO_RECORDING),\n          status = _yield$Permissions$as.status;\n        if (status !== 'granted') {\n          alert('Permission to access microphone denied');\n          return;\n        }\n        console.log('Starting recording..');\n        var newRecording = new Audio.Recording();\n        yield newRecording.prepareToRecordAsync(RECORDING_OPTIONS_PRESET_HIGH_QUALITY);\n        yield newRecording.startAsync();\n        setRecording(newRecording);\n        setIsRecording(true);\n        console.log('Recording started');\n      } catch (err) {\n        console.error('Failed to start recording', err);\n      }\n    });\n    return function startRecording() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var stopRecording = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      console.log('Stopping recording..');\n      setIsRecording(false);\n      yield recording.stopAndUnloadAsync();\n      var uri = recording.getURI();\n      console.log('Recording stopped and stored at', uri);\n      yield convertToText(uri);\n    });\n    return function stopRecording() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var convertToText = function () {\n    var _ref3 = _asyncToGenerator(function* (uri) {\n      try {\n        console.log('Converting to text..');\n        var _yield$Permissions$as2 = yield Permissions.askAsync(Permissions.AUDIO_RECORDING),\n          status = _yield$Permissions$as2.status;\n        if (status !== 'granted') {\n          alert('Permission to access microphone denied');\n          return;\n        }\n        var voicePermissions = yield Voice.getPermissionsAsync();\n        if (!voicePermissions.granted) {\n          yield Voice.requestPermissionsAsync();\n        }\n        var _yield$Voice$recogniz = yield Voice.recognizeAsync({\n            uri: uri,\n            language: 'en-US'\n          }),\n          _transcript = _yield$Voice$recogniz.transcript;\n        setTranscript(_transcript);\n        console.log('Transcript:', _transcript);\n      } catch (err) {\n        console.error('Failed to convert to text', err);\n      }\n    });\n    return function convertToText(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    return function () {\n      if (recording) {\n        recording.stopAndUnloadAsync();\n      }\n    };\n  }, []);\n  var handleLinkPress = function handleLinkPress() {\n    var link = 'https://youtu.be/X4sicgZ1rus';\n    Linking.openURL(link);\n  };\n  return _jsxs(View, {\n    style: styles.eyeContainer,\n    children: [_jsx(ImageBackground, {\n      source: require('D:\\\\Facultate Anul III\\\\SeverinReactApp\\\\reactappn\\\\assets\\\\images\\\\Backphoto2.jpg'),\n      style: styles.image\n    }), _jsxs(View, {\n      style: styles.titles,\n      children: [_jsx(Text, {\n        style: styles.title,\n        children: \"We Become Your Eyes\"\n      }), _jsx(Text, {\n        style: styles.subtitles,\n        children: \"Here To Help You\"\n      })]\n    }), _jsx(View, {\n      style: styles.buttMicrophone,\n      children: _jsx(MicroButton, {})\n    }), _jsx(View, {\n      style: styles.buttonsContainer,\n      children: _jsx(StyleButton, {\n        style: {\n          bottom: '50'\n        },\n        type: \"primary\",\n        content: \"Use My Eye\",\n        onPress: handleLinkPress\n      })\n    }), _jsxs(View, {\n      style: styles.buttonRecord,\n      children: [_jsx(StyleButton, {\n        type: \"secondary\",\n        content: \"Start Recording\",\n        onPress: startRecording\n      }), _jsx(Text, {\n        style: styles.textAs,\n        id: \"convert_text\",\n        children: transcript\n      })]\n    })]\n  });\n};\nexport default EyeItem;","map":{"version":3,"names":["React","useState","useEffect","StyleSheet","Text","View","ImageBackground","Modal","Button","Linking","styles","StyleButton","MicroButton","Permissions","Audio","Camera","jsx","_jsx","jsxs","_jsxs","RECORDING_OPTIONS_PRESET_HIGH_QUALITY","isMeteringEnabled","android","extension","sampleRate","numberOfChannels","bitRate","ios","linearPCMBitDepth","linearPCMIsBigEndian","linearPCMIsFloat","EyeItem","_useState","_useState2","_slicedToArray","recording","setRecording","_useState3","_useState4","isRecording","setIsRecording","_useState5","_useState6","transcript","setTranscript","startRecording","_ref","_asyncToGenerator","console","log","_yield$Permissions$as","askAsync","AUDIO_RECORDING","status","alert","newRecording","Recording","prepareToRecordAsync","startAsync","err","error","apply","arguments","stopRecording","_ref2","stopAndUnloadAsync","uri","getURI","convertToText","_ref3","_yield$Permissions$as2","voicePermissions","Voice","getPermissionsAsync","granted","requestPermissionsAsync","_yield$Voice$recogniz","recognizeAsync","language","_x","handleLinkPress","link","openURL","style","eyeContainer","children","source","require","image","titles","title","subtitles","buttMicrophone","buttonsContainer","bottom","type","content","onPress","buttonRecord","textAs","id"],"sources":["D:/Facultate Anul III/SeverinReactApp/reactappn/components/EyeItem/index.js"],"sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport { StyleSheet, Text, View, ImageBackground, Modal, Button,Linking} from 'react-native';\r\nimport styles from \"./styles\";\r\nimport StyleButton from \"../StyleButton\";\r\nimport MicroButton from \"../MicroButton\";\r\nimport * as Permissions from 'expo-permissions';\r\nimport { Audio } from 'expo-av';\r\nimport { Camera } from 'expo-camera';\r\n\r\nconst RECORDING_OPTIONS_PRESET_HIGH_QUALITY = {\r\n  isMeteringEnabled: true,\r\n  android: {\r\n    extension: '.m4a',\r\n    // outputFormat: Audio.RECORDING_OPTION_ANDROID_OUTPUT_FORMAT_MPEG_4,\r\n    // audioEncoder: Audio.RECORDING_OPTION_ANDROID_AUDIO_ENCODER_AAC,\r\n    sampleRate: 44100,\r\n    numberOfChannels: 2,\r\n    bitRate: 128000,\r\n  },\r\n  ios: {\r\n    extension: '.caf',\r\n    //audioQuality: Audio.RECORDING_OPTION_IOS_AUDIO_QUALITY_MAX,\r\n    sampleRate: 44100,\r\n    numberOfChannels: 2,\r\n    bitRate: 128000,\r\n    linearPCMBitDepth: 16,\r\n    linearPCMIsBigEndian: false,\r\n    linearPCMIsFloat: false,\r\n  },\r\n};\r\n\r\nconst EyeItem=()=>{\r\n \r\n//pentru website\r\n  //const [transcript, setTranscript] = useState('');\r\n    \r\n  // const startRecognition = () => {\r\n  //   const recognition = new window.webkitSpeechRecognition();\r\n  //   recognition.interimResults = true;\r\n\r\n  //   recognition.onresult = e => {\r\n  //     const interimTranscript = Array.from(e.results)\r\n  //       .map(result => result[0])\r\n  //       .map(result => result.transcript)\r\n  //       .join('');\r\n\r\n  //     setTranscript(interimTranscript);\r\n  //   };\r\n\r\n  //   recognition.start();\r\n    \r\n  // };\r\n  //for phone\r\n  const [recording, setRecording] = useState(null);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [transcript, setTranscript] = useState('');\r\n\r\n\r\n  const startRecording = async () => {\r\n    try {\r\n      console.log('Requesting permissions..');\r\n      const { status } = await Permissions.askAsync(Permissions.AUDIO_RECORDING);\r\n      if (status !== 'granted') {\r\n        alert('Permission to access microphone denied');\r\n        return;\r\n      }\r\n      console.log('Starting recording..');\r\n      const newRecording = new Audio.Recording();\r\n      await newRecording.prepareToRecordAsync(RECORDING_OPTIONS_PRESET_HIGH_QUALITY);\r\n      await newRecording.startAsync();\r\n      setRecording(newRecording);\r\n      setIsRecording(true);\r\n      console.log('Recording started');\r\n    } catch (err) {\r\n      console.error('Failed to start recording', err);\r\n    }\r\n  };\r\n\r\n  const stopRecording = async () => {\r\n    console.log('Stopping recording..');\r\n    setIsRecording(false);\r\n    await recording.stopAndUnloadAsync();\r\n    const uri = recording.getURI();\r\n    console.log('Recording stopped and stored at', uri);\r\n    await convertToText(uri);\r\n  };\r\n\r\n  const convertToText = async (uri) => {\r\n    try {\r\n      console.log('Converting to text..');\r\n      const { status } = await Permissions.askAsync(Permissions.AUDIO_RECORDING);\r\n      if (status !== 'granted') {\r\n        alert('Permission to access microphone denied');\r\n        return;\r\n      }\r\n      const voicePermissions = await Voice.getPermissionsAsync();\r\n      if (!voicePermissions.granted) {\r\n        await Voice.requestPermissionsAsync();\r\n      }\r\n      const { transcript } = await Voice.recognizeAsync({\r\n        uri,\r\n        language: 'en-US',\r\n      });\r\n      setTranscript(transcript);\r\n      console.log('Transcript:', transcript);\r\n    } catch (err) {\r\n      console.error('Failed to convert to text', err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (recording) {\r\n        recording.stopAndUnloadAsync();\r\n      }\r\n    };\r\n  }, []);\r\n  //var link='';\r\n  const handleLinkPress = () => {\r\n    // if(transcript.contains('l')){\r\n    //   link='https://youtu.be/b9eMGE7QtTk'\r\n    // }\r\n    const link = 'https://youtu.be/X4sicgZ1rus';\r\n    Linking.openURL(link);\r\n  };\r\nreturn (\r\n    <View style={styles.eyeContainer}>\r\n      \r\n\r\n    <ImageBackground \r\n    source={require('D:\\\\Facultate Anul III\\\\SeverinReactApp\\\\reactappn\\\\assets\\\\images\\\\Backphoto2.jpg')}\r\n    style={styles.image}\r\n    />\r\n\r\n    \r\n\r\n    <View style={styles.titles}>\r\n      <Text style={styles.title}>We Become Your Eyes</Text>\r\n      <Text style={styles.subtitles}>Here To Help You</Text>\r\n    </View>\r\n    <View style={styles.buttMicrophone}>\r\n      <MicroButton/>\r\n\r\n    </View>\r\n    <View style={styles.buttonsContainer}>\r\n    <StyleButton style={{bottom:'50'}}\r\n    type=\"primary\" \r\n    content={\"Use My Eye\"}\r\n    onPress={handleLinkPress}\r\n   \r\n    />\r\n    </View>\r\n    <View style={styles.buttonRecord}>\r\n    <StyleButton \r\n    type=\"secondary\" \r\n    content={\"Start Recording\"}\r\n    onPress={startRecording}\r\n   \r\n    />\r\n    <Text style={styles.textAs} id=\"convert_text\">{transcript}</Text>\r\n    </View>\r\n    {/* <>\r\n  <StyleButton styles={styles.butonsContainer}\r\n    id=\"click_to_record\"\r\n    title=\"Click to Record\"\r\n    onPress={startRecognition}\r\n  />\r\n  <Text style={styles.textAs} id=\"convert_text\">{transcript}</Text>\r\n</> */}\r\n{/* <View style={styles.buttonRecord}>\r\n    <StyleButton \r\n    type=\"secondary\" \r\n    content={\"Click to Record\"}\r\n    onPress={handleLinkPress}\r\n    \r\n    />\r\n    </View> */}\r\n    \r\n  </View>\r\n);\r\n\r\n};\r\n\r\n\r\nexport default EyeItem;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}