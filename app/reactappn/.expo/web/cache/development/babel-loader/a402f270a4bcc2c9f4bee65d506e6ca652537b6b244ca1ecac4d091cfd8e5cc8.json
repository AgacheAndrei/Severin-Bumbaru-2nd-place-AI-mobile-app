{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport styles from \"./styles\";\nimport StyleButton from \"../StyleButton\";\nimport MicroButton from \"../MicroButton\";\nimport * as Permissions from 'expo-permissions';\nimport { Audio } from 'expo-av';\nimport { Camera } from 'expo-camera';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar EyeItem = function EyeItem() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    transcript = _useState2[0],\n    setTranscript = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    recording = _useState4[0],\n    setRecording = _useState4[1];\n  var audioMode = {\n    allowsRecordingIOS: true,\n    playsInSilentModeIOS: true,\n    staysActiveInBackground: true,\n    shouldDuckAndroid: true,\n    playThroughEarpieceAndroid: false\n  };\n  function requestCameraPermission() {\n    return _requestCameraPermission.apply(this, arguments);\n  }\n  function _requestCameraPermission() {\n    _requestCameraPermission = _asyncToGenerator(function* () {\n      var _yield$Camera$request = yield Camera.requestMicrophonePermissionsAsync(),\n        status = _yield$Camera$request.status;\n      if (status !== 'granted') {\n        alert('Permission to access microphone was denied');\n        return;\n      }\n      return true;\n    });\n    return _requestCameraPermission.apply(this, arguments);\n  }\n  function startRecognition() {\n    return _startRecognition.apply(this, arguments);\n  }\n  function _startRecognition() {\n    _startRecognition = _asyncToGenerator(function* () {\n      try {\n        var _yield$Camera$request2 = yield Camera.requestMicrophonePermissionsAsync(),\n          status = _yield$Camera$request2.status;\n        if (status !== 'granted') {\n          alert('Permission to access microphone was denied');\n          return;\n        }\n        yield Audio.setAudioModeAsync(audioMode);\n        try {\n          if (_recording !== null) {\n            console.warn('Can only prepare one recording at a time.');\n            return;\n          }\n          var _recording = new Audio.Recording();\n          yield _recording.prepareToRecordAsync(Audio.RECORDING_OPTIONS_PRESET_HIGH_QUALITY);\n          yield _recording.startAsync();\n          setRecording(_recording);\n          console.log('Recording started');\n        } catch (error) {\n          console.error(error);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    });\n    return _startRecognition.apply(this, arguments);\n  }\n  var stopRecognition = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        yield recording.stopAndUnloadAsync();\n        var uri = recording.getURI();\n        setTranscript('');\n        setRecording(null);\n      } catch (error) {\n        console.error(error);\n      }\n    });\n    return function stopRecognition() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    return function () {\n      if (recording) {\n        recording.stopAndUnloadAsync();\n        setRecording(null);\n      }\n    };\n  }, [recording]);\n  var link = '';\n  var handleLinkPress = function handleLinkPress() {\n    if (transcript.contains('l')) {\n      link = 'https://youtu.be/b9eMGE7QtTk';\n    }\n    Linking.openURL(link);\n  };\n  return _jsxs(View, {\n    style: styles.eyeContainer,\n    children: [_jsx(ImageBackground, {\n      source: require('D:\\\\Facultate Anul III\\\\SeverinReactApp\\\\reactappn\\\\assets\\\\images\\\\Backphoto2.jpg'),\n      style: styles.image\n    }), _jsxs(View, {\n      style: styles.titles,\n      children: [_jsx(Text, {\n        style: styles.title,\n        children: \"We Become Your Eyes\"\n      }), _jsx(Text, {\n        style: styles.subtitles,\n        children: \"Here To Help You\"\n      })]\n    }), _jsx(View, {\n      style: styles.buttMicrophone,\n      children: _jsx(MicroButton, {})\n    }), _jsx(View, {\n      style: styles.buttonsContainer,\n      children: _jsx(StyleButton, {\n        style: {\n          bottom: '50'\n        },\n        type: \"primary\",\n        content: \"Use My Eye\",\n        onPress: handleLinkPress\n      })\n    }), _jsxs(View, {\n      style: styles.buttonRecord,\n      children: [_jsx(StyleButton, {\n        type: \"secondary\",\n        content: \"Start Recording\",\n        onPress: startRecognition\n      }), _jsx(Text, {\n        style: styles.textAs,\n        id: \"convert_text\",\n        children: transcript\n      })]\n    })]\n  });\n};\nexport default EyeItem;","map":{"version":3,"names":["React","useState","useEffect","StyleSheet","Text","View","ImageBackground","Modal","Button","Linking","styles","StyleButton","MicroButton","Permissions","Audio","Camera","jsx","_jsx","jsxs","_jsxs","EyeItem","_useState","_useState2","_slicedToArray","transcript","setTranscript","_useState3","_useState4","recording","setRecording","audioMode","allowsRecordingIOS","playsInSilentModeIOS","staysActiveInBackground","shouldDuckAndroid","playThroughEarpieceAndroid","requestCameraPermission","_requestCameraPermission","apply","arguments","_asyncToGenerator","_yield$Camera$request","requestMicrophonePermissionsAsync","status","alert","startRecognition","_startRecognition","_yield$Camera$request2","setAudioModeAsync","console","warn","Recording","prepareToRecordAsync","RECORDING_OPTIONS_PRESET_HIGH_QUALITY","startAsync","log","error","stopRecognition","_ref","stopAndUnloadAsync","uri","getURI","link","handleLinkPress","contains","openURL","style","eyeContainer","children","source","require","image","titles","title","subtitles","buttMicrophone","buttonsContainer","bottom","type","content","onPress","buttonRecord","textAs","id"],"sources":["D:/Facultate Anul III/SeverinReactApp/reactappn/components/EyeItem/index.js"],"sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport { StyleSheet, Text, View, ImageBackground, Modal, Button,Linking} from 'react-native';\r\nimport styles from \"./styles\";\r\nimport StyleButton from \"../StyleButton\";\r\nimport MicroButton from \"../MicroButton\";\r\nimport * as Permissions from 'expo-permissions';\r\nimport { Audio } from 'expo-av';\r\nimport { Camera } from 'expo-camera';\r\n\r\nconst EyeItem=()=>{\r\n \r\n//pentru website\r\n  //const [transcript, setTranscript] = useState('');\r\n    \r\n  // const startRecognition = () => {\r\n  //   const recognition = new window.webkitSpeechRecognition();\r\n  //   recognition.interimResults = true;\r\n\r\n  //   recognition.onresult = e => {\r\n  //     const interimTranscript = Array.from(e.results)\r\n  //       .map(result => result[0])\r\n  //       .map(result => result.transcript)\r\n  //       .join('');\r\n\r\n  //     setTranscript(interimTranscript);\r\n  //   };\r\n\r\n  //   recognition.start();\r\n    \r\n  // };\r\n  //for phone\r\n  const [transcript, setTranscript] = useState('');\r\n  const [recording, setRecording] = useState(null);\r\n  const audioMode = {\r\n    allowsRecordingIOS: true,\r\n    playsInSilentModeIOS: true,\r\n    staysActiveInBackground: true,\r\n    //interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_MIX_WITH_OTHERS,\r\n    shouldDuckAndroid: true,\r\n    playThroughEarpieceAndroid: false,\r\n  };\r\n  \r\n\r\n  async function requestCameraPermission() {\r\n    const { status } = await Camera.requestMicrophonePermissionsAsync();\r\n    if (status !== 'granted') {\r\n      alert('Permission to access microphone was denied');\r\n      return;\r\n    }\r\n  \r\n    return true;\r\n  }\r\n  \r\n  async function startRecognition() {\r\n    try {\r\n      const { status } = await Camera.requestMicrophonePermissionsAsync();\r\n      if (status !== 'granted') {\r\n        alert('Permission to access microphone was denied');\r\n        return;\r\n      }\r\n  \r\n    await Audio.setAudioModeAsync(audioMode);\r\n  \r\n    try {\r\n      if (recording !== null) {\r\n        console.warn('Can only prepare one recording at a time.');\r\n        return;\r\n      }\r\n  \r\n      const recording = new Audio.Recording();\r\n      await recording.prepareToRecordAsync(Audio.RECORDING_OPTIONS_PRESET_HIGH_QUALITY);\r\n      await recording.startAsync();\r\n      setRecording(recording);\r\n      console.log('Recording started');\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n  }\r\n\r\n  const stopRecognition = async () => {\r\n    try {\r\n      await recording.stopAndUnloadAsync();\r\n      const uri = recording.getURI();\r\n      setTranscript('');\r\n      setRecording(null);\r\n      //console.log(Recording saved to ${uri});\r\n\r\n      // Call a speech-to-text API to convert the recording to text\r\n      // ...\r\n\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (recording) {\r\n        recording.stopAndUnloadAsync();\r\n        setRecording(null);\r\n      }\r\n    };\r\n  }, [recording]);\r\n  var link='';\r\n  const handleLinkPress = () => {\r\n    if(transcript.contains('l')){\r\n      link='https://youtu.be/b9eMGE7QtTk'\r\n    }\r\n    //link = 'https://youtu.be/X4sicgZ1rus';\r\n    Linking.openURL(link);\r\n  };\r\nreturn (\r\n    <View style={styles.eyeContainer}>\r\n      \r\n\r\n    <ImageBackground \r\n    source={require('D:\\\\Facultate Anul III\\\\SeverinReactApp\\\\reactappn\\\\assets\\\\images\\\\Backphoto2.jpg')}\r\n    style={styles.image}\r\n    />\r\n\r\n    \r\n\r\n    <View style={styles.titles}>\r\n      <Text style={styles.title}>We Become Your Eyes</Text>\r\n      <Text style={styles.subtitles}>Here To Help You</Text>\r\n    </View>\r\n    <View style={styles.buttMicrophone}>\r\n      <MicroButton/>\r\n\r\n    </View>\r\n    <View style={styles.buttonsContainer}>\r\n    <StyleButton style={{bottom:'50'}}\r\n    type=\"primary\" \r\n    content={\"Use My Eye\"}\r\n    onPress={handleLinkPress}\r\n   \r\n    />\r\n    </View>\r\n    <View style={styles.buttonRecord}>\r\n    <StyleButton \r\n    type=\"secondary\" \r\n    content={\"Start Recording\"}\r\n    onPress={startRecognition}\r\n   \r\n    />\r\n    <Text style={styles.textAs} id=\"convert_text\">{transcript}</Text>\r\n    </View>\r\n    {/* <>\r\n  <StyleButton styles={styles.butonsContainer}\r\n    id=\"click_to_record\"\r\n    title=\"Click to Record\"\r\n    onPress={startRecognition}\r\n  />\r\n  <Text style={styles.textAs} id=\"convert_text\">{transcript}</Text>\r\n</> */}\r\n{/* <View style={styles.buttonRecord}>\r\n    <StyleButton \r\n    type=\"secondary\" \r\n    content={\"Click to Record\"}\r\n    onPress={handleLinkPress}\r\n    \r\n    />\r\n    </View> */}\r\n    \r\n  </View>\r\n);\r\n\r\n};\r\n\r\n\r\nexport default EyeItem;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}