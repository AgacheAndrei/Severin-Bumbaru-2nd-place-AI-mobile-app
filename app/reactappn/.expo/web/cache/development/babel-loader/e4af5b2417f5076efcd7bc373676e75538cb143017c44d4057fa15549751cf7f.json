{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useCallback, useRef, useEffect, useState } from 'react';\nimport { askAsync, getAsync } from \"./Permissions\";\nexport function usePermissions(type) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var isMounted = useRef(true);\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _options$ask = options.ask,\n    ask = _options$ask === void 0 ? false : _options$ask,\n    _options$get = options.get,\n    get = _options$get === void 0 ? true : _options$get;\n  var types = Array.isArray(type) ? type : [type];\n  var askPermissions = useCallback(function () {\n    return askAsync.apply(void 0, _toConsumableArray(types)).then(function (response) {\n      if (isMounted.current) {\n        setData(response);\n      }\n    });\n  }, [type]);\n  var getPermissions = useCallback(function () {\n    return getAsync.apply(void 0, _toConsumableArray(types)).then(function (response) {\n      if (isMounted.current) {\n        setData(response);\n      }\n    });\n  }, [type]);\n  useEffect(function () {\n    if (ask) {\n      askPermissions();\n    }\n    if (!ask && get) {\n      getPermissions();\n    }\n  }, [ask, askPermissions, get, getPermissions]);\n  useEffect(function () {\n    isMounted.current = true;\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  return [data, askPermissions, getPermissions];\n}","map":{"version":3,"names":["useCallback","useRef","useEffect","useState","askAsync","getAsync","usePermissions","type","options","arguments","length","undefined","isMounted","_useState","_useState2","_slicedToArray","data","setData","_options$ask","ask","_options$get","get","types","Array","isArray","askPermissions","apply","_toConsumableArray","then","response","current","getPermissions"],"sources":["D:\\Facultate Anul III\\SeverinReactApp\\reactappn\\node_modules\\expo-permissions\\src\\PermissionsHooks.ts"],"sourcesContent":["import { useCallback, useRef, useEffect, useState } from 'react';\n\nimport { askAsync, getAsync } from './Permissions';\nimport { PermissionResponse, PermissionType } from './Permissions.types';\n\n/**\n * Get or ask permission for protected functionality within the app.\n * It returns the permission response after fetching or asking it.\n * The hook fetches the permissions when rendered, by default.\n * To ask the user permission, use the `askPermission` callback or `ask` option.\n *\n * @see https://docs.expo.dev/versions/latest/sdk/permissions/\n * @example\n * ```tsx\n * const [permission, askPermission, getPermission] = usePermissions(Permissions.CAMERA);\n *\n * return permission?.granted\n *   ? <Camera ... />\n *   : <Button onPress={askPermission} />;\n * ```\n */\nexport function usePermissions(\n  type: PermissionType | PermissionType[],\n  options: PermissionsOptions = {}\n): [PermissionResponse | undefined, () => Promise<void>, () => Promise<void>] {\n  const isMounted = useRef(true);\n  const [data, setData] = useState<PermissionResponse>();\n  const { ask = false, get = true } = options;\n  const types = Array.isArray(type) ? type : [type];\n\n  // note: its intentional to listen to `type`, not `types`.\n  // when `type` is casted to an array, it possible creates a new one on every render.\n  // to prevent unnecessary function instances we need to listen to the \"raw\" value.\n\n  const askPermissions = useCallback(\n    () =>\n      askAsync(...types).then((response) => {\n        if (isMounted.current) {\n          setData(response);\n        }\n      }),\n    [type]\n  );\n\n  const getPermissions = useCallback(\n    () =>\n      getAsync(...types).then((response) => {\n        if (isMounted.current) {\n          setData(response);\n        }\n      }),\n    [type]\n  );\n\n  useEffect(() => {\n    if (ask) {\n      askPermissions();\n    }\n\n    if (!ask && get) {\n      getPermissions();\n    }\n  }, [ask, askPermissions, get, getPermissions]);\n\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  return [data, askPermissions, getPermissions];\n}\n\nexport interface PermissionsOptions {\n  /** If it should ask the permissions when mounted, defaults to `false` */\n  ask?: boolean;\n  /** If it should fetch information about the permissions when mounted, defaults to `true` */\n  get?: boolean;\n}\n"],"mappings":";;AAAA,SAASA,WAAW,EAAEC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAEhE,SAASC,QAAQ,EAAEC,QAAQ;AAmB3B,OAAM,SAAUC,cAAcA,CAC5BC,IAAuC,EACP;EAAA,IAAhCC,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAA8B,EAAE;EAEhC,IAAMG,SAAS,GAAGX,MAAM,CAAC,IAAI,CAAC;EAC9B,IAAAY,SAAA,GAAwBV,QAAQ,EAAsB;IAAAW,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/CG,IAAI,GAAAF,UAAA;IAAEG,OAAO,GAAAH,UAAA;EACpB,IAAAI,YAAA,GAAoCV,OAAO,CAAnCW,GAAG;IAAHA,GAAG,GAAAD,YAAA,cAAG,KAAK,GAAAA,YAAA;IAAAE,YAAA,GAAiBZ,OAAO,CAAtBa,GAAG;IAAHA,GAAG,GAAAD,YAAA,cAAG,IAAI,GAAAA,YAAA;EAC/B,IAAME,KAAK,GAAGC,KAAK,CAACC,OAAO,CAACjB,IAAI,CAAC,GAAGA,IAAI,GAAG,CAACA,IAAI,CAAC;EAMjD,IAAMkB,cAAc,GAAGzB,WAAW,CAChC;IAAA,OACEI,QAAQ,CAAAsB,KAAA,SAAAC,kBAAA,CAAIL,KAAK,EAAC,CAACM,IAAI,CAAC,UAACC,QAAQ,EAAI;MACnC,IAAIjB,SAAS,CAACkB,OAAO,EAAE;QACrBb,OAAO,CAACY,QAAQ,CAAC;;IAErB,CAAC,CAAC;EAAA,GACJ,CAACtB,IAAI,CAAC,CACP;EAED,IAAMwB,cAAc,GAAG/B,WAAW,CAChC;IAAA,OACEK,QAAQ,CAAAqB,KAAA,SAAAC,kBAAA,CAAIL,KAAK,EAAC,CAACM,IAAI,CAAC,UAACC,QAAQ,EAAI;MACnC,IAAIjB,SAAS,CAACkB,OAAO,EAAE;QACrBb,OAAO,CAACY,QAAQ,CAAC;;IAErB,CAAC,CAAC;EAAA,GACJ,CAACtB,IAAI,CAAC,CACP;EAEDL,SAAS,CAAC,YAAK;IACb,IAAIiB,GAAG,EAAE;MACPM,cAAc,EAAE;;IAGlB,IAAI,CAACN,GAAG,IAAIE,GAAG,EAAE;MACfU,cAAc,EAAE;;EAEpB,CAAC,EAAE,CAACZ,GAAG,EAAEM,cAAc,EAAEJ,GAAG,EAAEU,cAAc,CAAC,CAAC;EAE9C7B,SAAS,CAAC,YAAK;IACbU,SAAS,CAACkB,OAAO,GAAG,IAAI;IACxB,OAAO,YAAK;MACVlB,SAAS,CAACkB,OAAO,GAAG,KAAK;IAC3B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO,CAACd,IAAI,EAAES,cAAc,EAAEM,cAAc,CAAC;AAC/C"},"metadata":{},"sourceType":"module","externalDependencies":[]}